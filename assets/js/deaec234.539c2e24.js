"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[9814],{6524:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>l,frontMatter:()=>a,metadata:()=>o,toc:()=>d});var t=r(4848),s=r(8453);const a={},i="Text2GQL\u8bed\u6cd5\u63d0\u793a\u624b\u518c",o={id:"application-development/chat_guide",title:"Text2GQL\u8bed\u6cd5\u63d0\u793a\u624b\u518c",description:"\u672c\u624b\u518c\u5217\u51fa\u4e86GQL\u5e38\u89c1\u7684\u8bed\u6cd5\u70b9\u4ee5\u53ca\u53c2\u8003\u7684\u63d0\u793a\u65b9\u6cd5\uff0c\u7528\u6237\u53ef\u53c2\u8003\u63d0\u95ee\u793a\u4f8b\u8ba9\u6a21\u578b\u751f\u6210\u5bf9\u5e94\u7684\u8bed\u6cd5\u7684GQL\u8bed\u53e5\u3002",source:"@site/../docs-cn/source/5.application-development/4.chat_guide.md",sourceDirName:"5.application-development",slug:"/application-development/chat_guide",permalink:"/tugraph-analytics/zh/application-development/chat_guide",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:4,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"\u81ea\u5b9a\u4e49Connector",permalink:"/tugraph-analytics/zh/application-development/connector/udc"},next:{title:"K8S\u96c6\u7fa4\u90e8\u7f72",permalink:"/tugraph-analytics/zh/deploy/install_guide"}},c={},d=[];function h(e){const n={br:"br",h1:"h1",header:"header",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"text2gql\u8bed\u6cd5\u63d0\u793a\u624b\u518c",children:"Text2GQL\u8bed\u6cd5\u63d0\u793a\u624b\u518c"})}),"\n",(0,t.jsx)(n.p,{children:"\u672c\u624b\u518c\u5217\u51fa\u4e86GQL\u5e38\u89c1\u7684\u8bed\u6cd5\u70b9\u4ee5\u53ca\u53c2\u8003\u7684\u63d0\u793a\u65b9\u6cd5\uff0c\u7528\u6237\u53ef\u53c2\u8003\u63d0\u95ee\u793a\u4f8b\u8ba9\u6a21\u578b\u751f\u6210\u5bf9\u5e94\u7684\u8bed\u6cd5\u7684GQL\u8bed\u53e5\u3002"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"\u8bed\u6cd5"}),(0,t.jsx)(n.th,{children:"\u63d0\u95ee\u793a\u4f8b"}),(0,t.jsx)(n.th,{children:"\u7ed3\u679c"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"\u67e5\u627e\u70b9"}),(0,t.jsxs)(n.td,{children:["\u8bf7\u627e\u51fa\u7684\u7c7b\u578b\u4e3aperson",(0,t.jsx)(n.strong,{children:"\u7684\u70b9"})]}),(0,t.jsx)(n.td,{children:"match(a:person) return a"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"\u67e5\u627e\u8fb9"}),(0,t.jsxs)(n.td,{children:["\u8fd4\u56de\u56fe\u4e2d\u6240\u6709\u7684\u6807\u7b7e\u4e3aknows",(0,t.jsx)(n.strong,{children:"\u7684\u8fb9"})]}),(0,t.jsx)(n.td,{children:"match(a)-[e:knows]->(b) return e"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"\u67e5\u627e\u5173\u7cfb"}),(0,t.jsxs)(n.td,{children:["\u67e5\u8be210\u4e2a\u5c5e\u4e8e\u5317\u4eac\u7684\u5927\u5b66",(0,t.jsx)(n.br,{}),"\u627e\u51fa5\u4e2a\u548c\u5c0f\u5f20\u8001\u5e08",(0,t.jsx)(n.strong,{children:"\u6709\u5173\u7cfb"}),"\u7684\u5b66\u751f"]}),(0,t.jsxs)(n.td,{children:["match(a:city where a.name = '\u5317\u4eac')<-[:belong]-(b:university) return b limit 10",(0,t.jsx)(n.br,{}),"match(a:teacher where a.name='\u5c0f\u5f20')-[e]-(b:student) return b limit 5"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"\u67e5\u627e\u591a\u5ea6\u5173\u7cfb"}),(0,t.jsxs)(n.td,{children:["\u67e5\u627e\u5c0f\u738b\u540c\u5b66\u7684\u670b\u53cb\u8ba4\u8bc6\u7684\u4eba",(0,t.jsx)(n.br,{}),(0,t.jsx)(n.br,{}),"\u8bf7\u5e2e\u6211\u627e\u51fa\u548c\u6807\u7b7e\u4e3a\u5927\u5b66\u7684\u70b9\u6709\u62e5\u6709\u5173\u7cfb\u7684\u90e8\u95e8,\u5e76\u4e14\u548c\u8fd9\u4e9b\u90e8\u95e8\u6709\u62e5\u6709\u5173\u7cfb\u7684\u5b66\u751f,\u5e76\u4e14\u548c\u8fd9\u4e9b\u5b66\u751f\u6709\u9009\u62e9\u5173\u7cfb\u7684\u8bfe\u7a0b",(0,t.jsx)(n.br,{}),(0,t.jsx)(n.br,{}),"\u8bf7\u67e5\u627e\u817e\u8baf\u548c\u8c37\u6b4c\u516c\u53f8\u5171\u540c\u521b\u5efa\u7684\u8f6f\u4ef6\u7684\u540d\u79f0\uff0c\u8fd4\u56de5\u4e2a\u3002"]}),(0,t.jsxs)(n.td,{children:["match(a:student where a.name = '\u5c0f\u738b')-[e:friend]->(b)-[e2:knows]->(c:person) return c",(0,t.jsx)(n.br,{}),(0,t.jsx)(n.br,{}),"match(a:university)-[e:has]->(b:department)-[e2:has]->(c:student)-[e3:selects]->(d:course) return d",(0,t.jsx)(n.br,{}),(0,t.jsx)(n.br,{}),"match(a:company where a.name='\u817e\u8baf')-[e:creates]->(b:software)<-[e2:creates]-(c:company where c.name='\u8c37\u6b4c') return b.name limit 5"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Loop"}),(0,t.jsxs)(n.td,{children:["\u67e5\u8be2\u4eceperson\u5f20\u601d\u742a\u51fa\u53d1\uff0c\u7ecf\u8fc7\u7c7b\u578b\u4e3a\u652f\u4ed8\u7684\u8fb9\uff0c",(0,t.jsx)(n.strong,{children:"\u8d702\u52304\u5ea6\u5230\u8fbe\u7684\u70b9"})]}),(0,t.jsx)(n.td,{children:"match(a:person where a.name='\u5f20\u601d\u742a')-[e:pay]->{2,4}(b:person) return b"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Loop(\u73af)"}),(0,t.jsxs)(n.td,{children:["\u627e\u51fa\u4e0eperson\u674e\u7ea2\u6709knows\u5173\u7cfb\u7684",(0,t.jsx)(n.strong,{children:"3\u8df3\u4ee5\u5185\u7684\u73af"})]}),(0,t.jsxs)(n.td,{children:["match(a:person where name = '\u674e\u7ea2')-[e:knows]->{1,2}(b)->(a) return a.id, b.id as b_id",(0,t.jsx)(n.br,{})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"\u8fc7\u6ee4\u6761\u4ef6"}),(0,t.jsxs)(n.td,{children:["\u627e\u51fa\u5c0f\u7ea2\u8ba4\u8bc6\u7684\u5e74\u9f84\u5927\u4e8e20\uff0c\u5de5\u8d44\u5927\u4e8e5000\u7684\u4eba",(0,t.jsx)(n.br,{}),(0,t.jsx)(n.br,{}),(0,t.jsx)(n.br,{}),"\u8bf7\u5e2e\u6211\u627e\u51fa10\u4e2a\u6027\u522b\u4e0d\u662ffamale\u4e14\u8eab\u9ad8\u5c0f\u4e8e160,\u6216id\u5927\u4e8e5\u7684\u8282\u70b9"]}),(0,t.jsxs)(n.td,{children:["match(a:person where a.name='\u5c0f\u7ea2')-[e:knows]->(b:person where b.age > 20 and b.salary > 5000) return b",(0,t.jsx)(n.br,{}),(0,t.jsx)(n.br,{}),"match(a where (a.gender <> 'female' and a.height < 160) or a.id > 5) return a limit 10"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Let\u5355\u503c"}),(0,t.jsxs)(n.td,{children:["\u67e5\u8be2\u8682\u8681\u96c6\u56e2\u521b\u9020\u7684\u8f6f\u4ef6, ",(0,t.jsx)(n.strong,{children:"\u4ee4"}),"\u8f6f\u4ef6\u7684minPrice",(0,t.jsx)(n.strong,{children:"\u7b49\u4e8e"}),"\u8f6f\u4ef6\u7684\u4ef7\u683c\u7684\u6700\u5c0f\u503c, \u8fd4\u56de\u516c\u53f8\u7684id, \u8f6f\u4ef6\u7684minPrice"]}),(0,t.jsx)(n.td,{children:"match(a:company where a.name = '\u8682\u8681\u96c6\u56e2')-[e:creates]->(b:software) let b.minPrice = MIN(b.price) return a.id, b.minPrice"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Let\u5b50\u67e5\u8be2"}),(0,t.jsxs)(n.td,{children:["\u8bf7\u5e2e\u6211\u67e5\u627e\u516c\u53f8\u8682\u8681\u96c6\u56e2\u96c7\u4f63\u7684person, ",(0,t.jsx)(n.strong,{children:"\u4ee4"}),"\u8fd9\u4e2aperson\u7684countSalary",(0,t.jsx)(n.strong,{children:"\u7684\u503c\u7b49\u4e8e"}),"\u8ba4\u8bc6\u4ed6\u7684\u4eba\u7684\u85aa\u8d44\u7684\u548c, \u518d\u67e5\u627e\u4ed6\u8d2d\u4e70\u7684\u8f6f\u4ef6",(0,t.jsx)(n.br,{}),(0,t.jsx)(n.br,{}),"\u7ed9\u51faid\u4e3a10\u7684\u57ce\u5e02\u6240\u5c5e\u4e8e\u7684\u56fd\u5bb6, \u5e76\u5c06\u56fd\u5bb6\u6709\u5173\u7684\u516c\u53f8\u7684\u4eba\u6570\u7684\u5e73\u5747\u503c",(0,t.jsx)(n.strong,{children:"\u8d4b\u503c"}),"\u7ed9\u56fd\u5bb6\u7684avgCnt"]}),(0,t.jsxs)(n.td,{children:["match(a:company where a.name = '\u8682\u8681\u96c6\u56e2')-[e:employee]->(b:person) let b.countSalary = SUM((b:person)<-[e2:knows]-(c:person) => c.salary) match(b:person)-[e3:buy]->(d:software) return b.countSalary, d",(0,t.jsx)(n.br,{}),(0,t.jsx)(n.br,{}),"match(a:city where id = '10')-[e:belong]->(b:country)<-[e2:belong]-(c:company) let b.avgCnt = AVG(c.peopleNumber) return b"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"\u51fd\u6570\u8c03\u7528"}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.strong,{children:"\u8c03\u7528SSSP\u51fd\u6570"}),",\u4ee5'arg1', 10",(0,t.jsx)(n.strong,{children:"\u4f5c\u4e3a\u8f93\u5165"}),",\u8fd4\u56deid, distance"]}),(0,t.jsx)(n.td,{children:"match(a:person) call sssp(a, 10) yield (id, distance) return id, distance"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"order"}),(0,t.jsxs)(n.td,{children:["\u8fd4\u56de\u516c\u53f8\u521b\u9020\u7684\u8f6f\u4ef6\uff0c\u5e76\u6839\u636e\u516c\u53f8\u7684\u89c4\u683c\u4ece\u5927\u5230\u5c0f\u3001\u8f6f\u4ef6\u7684\u4ef7\u683c",(0,t.jsx)(n.strong,{children:"\u4ece\u5c0f\u5230\u5927\u6392\u5e8f"})]}),(0,t.jsx)(n.td,{children:"match(a:company)-[e:creates]->(b:software) return a.scale,b.price order by a.scale desc, b.price asc"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"group by"}),(0,t.jsxs)(n.td,{children:["\u627e\u51fa\u5c0f\u7ea2\u8ba4\u8bc6\u7684\u4eba\uff0c",(0,t.jsx)(n.strong,{children:"\u6839\u636e"}),"\u8fd9\u4e9b\u4eba\u7684\u6027\u522b",(0,t.jsx)(n.strong,{children:"\u5206\u7ec4"}),"\uff0c\u8fd4\u56de\u5de5\u8d44\u7684\u6700\u5927\u503c",(0,t.jsx)(n.br,{}),(0,t.jsx)(n.br,{}),"\u5e2e\u6211\u627e\u51fa\u4e0e\u5317\u4eac\u5927\u5b66\u6709\u5173\u8054\u7684\u516c\u53f8\uff0c\u8fd4\u56de\u516c\u53f8",(0,t.jsx)(n.strong,{children:"\u4ee5"}),"\u89c4\u6a21",(0,t.jsx)(n.strong,{children:"\u8fdb\u884c\u5206\u7ec4"}),"\u7684\u4eba\u6570\u7684\u5e73\u5747\u503c"]}),(0,t.jsxs)(n.td,{children:["match(a:person where person.name = '\u5c0f\u7ea2')-[e:knows]->(b:person) return MAX(b.salary) group by b.gender",(0,t.jsx)(n.br,{}),(0,t.jsx)(n.br,{}),"match(a:university where a.name='\u5317\u4eac\u5927\u5b66')-[e]-(b:company) return AVG(b.peopleNumber) group by b.scale"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"join"}),(0,t.jsxs)(n.td,{children:["\u627e\u51fa\u90d1\u4f1f\u559c\u6b22\u7684\u6240\u6709\u4eba\uff0c\u4ee5\u53ca\u8ba4\u8bc6\u90d1\u4f1f\u7684\u6240\u6709\u4eba\uff0c\u5e76\u5c06\u5b83\u4eec",(0,t.jsx)(n.strong,{children:"\u4e00\u8d77\u8fd4\u56de"}),(0,t.jsx)(n.br,{}),(0,t.jsx)(n.br,{}),"\u8bf7\u5e2e\u6211\u627e\u51fa\u548cperson alice\u6709\u5173\u8054\u7684\u5b66\u6821,",(0,t.jsx)(n.strong,{children:"\u79f0\u4e3aX"}),",\u518d\u5e2e\u6211\u627e\u51fa",(0,t.jsx)(n.strong,{children:"\u548c\u8fd9\u4e2aX\u6709\u5173\u8054"}),"\u7684\u5176\u4ed6\u516c\u53f8,\u4ee5\u53ca\u548cX\u6709\u5173\u8054\u7684person"]}),(0,t.jsxs)(n.td,{children:["match(a:person where a.name = '\u90d1\u4f1f')-[e:likes]->(b:person),(a:person where a.name = '\u90d1\u4f1f')<-[e2:knows]-(c:person) return a, b, c",(0,t.jsx)(n.br,{}),(0,t.jsx)(n.br,{}),"match(a:person where a.name = 'alice')-[e]-(b:school), (b:school)-[e2]-(c:company),(b:school)-[e3]-(d:person) return a, b, c, d"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsxs)(n.td,{children:["\u5e26\u56fe\u7684schema\u5355\u6761\u67e5\u8be2",(0,t.jsx)(n.br,{}),(0,t.jsx)(n.strong,{children:"\uff08\u5728Console\u4e2d\u5f00\u542f\u201c\u9644\u5e26\u56feschema\u201d\u5f00\u5173\u4f1a\u81ea\u52a8\u62fc\u63a5\uff0c\u4e0d\u9700\u8981\u7528\u6237\u81ea\u5df1\u8f93\u5165"}),"\uff09"]}),(0,t.jsx)(n.td,{children:"\u4f7f\u7528\u8fd9\u4e2a\u56fe:CREATE GRAPH g ( Vertex film ( id int ID, name varchar, category varchar, value int ), Vertex cinema ( id int ID, name varchar, address varchar, size int ), Vertex person ( id int ID, name varchar, age int, gender varchar, height int, salary int ), Vertex comment ( id int ID, name varchar, createTime bigint, wordCount int ), Vertex tag ( id int ID, name varchar, value int ), Edge person_likes_comment ( srcId int FROM person SOURCE ID, targetId int FROM comment DESTINATION ID, weight double, f0 int, f1 boolean ), Edge cinema_releases_film ( srcId int FROM cinema SOURCE ID, targetId int FROM film DESTINATION ID, weight double, f0 int, f1 boolean ), Edge person_watch_film ( srcId int FROM person SOURCE ID, targetId int FROM film DESTINATION ID, weight double, f0 int, f1 boolean, timeStamp bigint ), Edge film_has_tag ( srcId int FROM film SOURCE ID, targetId int FROM tag DESTINATION ID, weight double, f0 int, f1 boolean ), Edge person_creates_comment ( srcId int FROM person SOURCE ID, targetId int FROM comment DESTINATION ID, weight double, f0 int, f1 boolean, timeStamp bigint ), Edge comment_belong_film ( srcId int FROM comment SOURCE ID, targetId int FROM film DESTINATION ID, weight double, f0 int, f1 boolean ));\u627e\u51fa\u548cperson\u5b59\u6885\u6709person_creates_comment\u5173\u7cfb\u7684comment,\u4ee5\u53ca\u548cperson\u5b59\u5efa\u806a\u6709person_likes_comment\u5173\u7cfb\u7684comment,\u5c06\u5b83\u4eec\u90fd\u8fd4\u56de"}),(0,t.jsx)(n.td,{children:"atch(a:person where a.name = '\u5b59\u6885')-[e:person_creates_comment]->(b:comment),(c:person where c.name = '\u5b59\u5efa\u806a')-[e2:person_likes_comment]->(d:comment)return a, b, c, d"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"\u5e26\u56fe\u7684schema\u591a\u6761\u67e5\u8be2"}),(0,t.jsx)(n.td,{children:"\u4f7f\u7528\u8fd9\u4e2a\u56fe:CREATE GRAPH g ( Vertex book ( id int ID, name varchar, id int ID, name varchar, category varchar, price int, wordCount int, createTime bigint ), Vertex publisher ( id int ID, name varchar, age int, gender varchar, height int, salary int ), Vertex reader ( id int ID, name varchar, age int, gender varchar, height int, salary int ), Vertex author ( id int ID, name varchar, age int, gender varchar, height int, salary int ), Edge author_write_book ( srcId int FROM author SOURCE ID, targetId int FROM book DESTINATION ID, weight double, f0 int, f1 boolean, timeStamp bigint ), Edge publisher_publish_book ( srcId int FROM publisher SOURCE ID, targetId int FROM book DESTINATION ID, weight double, f0 int, f1 boolean, timeStamp bigint ), Edge book_refers_book ( srcId int FROM book SOURCE ID, targetId int FROM book DESTINATION ID, weight double, f0 int, f1 boolean ), Edge reader_likes_book ( srcId int FROM reader SOURCE ID, targetId int FROM book DESTINATION ID, weight double, f0 int, f1 boolean ), Edge author_knows_author ( srcId int FROM author SOURCE ID, targetId int FROM author DESTINATION ID, weight double, f0 int, f1 boolean ));\u6267\u884c\u4ee5\u4e0b4\u4e2a\u67e5\u8be2:1: \u627e\u51fa\u88ab\u4f5c\u5bb6\u9ec4\u5efa\u806a\u8ba4\u8bc6\u7684\u4f5c\u5bb6;2: \u8fd4\u56de\u6e90\u70b9\u6807\u7b7e\u4e3a\u4f5c\u5bb6,\u76ee\u6807\u70b9\u6807\u7b7e\u4e3a\u4f5c\u5bb6,\u6807\u7b7e\u4e3aauthor_knows_author\u7684\u8fb9;3: \u8bf7\u5e2e\u6211\u67e5\u627e\u6240\u6709\u4e0ebook\u8ba1\u7b97\u673a\u7f51\u7edc\u6709\u5173\u7cfb\u7684book\u7684id;4: \u8bf7\u5e2e\u6211\u67e5\u627e152\u4e2a\u4e0e\u4f55\u96ea\u548c\u5f20\u5efa\u806a\u90fd\u5b58\u5728\u5173\u7cfb\u7684\u4e66\u8282\u70b9;"}),(0,t.jsx)(n.td,{children:"\u67e5\u8be2\u8bed\u53e5\u4e3a:1: match(a:author)<-[e:author_knows_author]-(b:author where b.name='\u9ec4\u5efa\u806a') return a, b;2: match(a:author)-[e:author_knows_author]->(b:author) return e;3: match(a:book where a.name='\u8ba1\u7b97\u673a\u7f51\u7edc')-[e]-(b:book) return b.id;4: match(a where a.name='\u4f55\u96ea')-[e]->(b:book)<-[e2]-(c where c.name='\u5f20\u5efa\u806a') return b limit 152;"})]})]})]})]})}function l(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>i,x:()=>o});var t=r(6540);const s={},a=t.createContext(s);function i(e){const n=t.useContext(a);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),t.createElement(a.Provider,{value:n},e.children)}}}]);