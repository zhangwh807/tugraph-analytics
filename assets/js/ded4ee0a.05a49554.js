"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[3465],{2822:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>u,frontMatter:()=>r,metadata:()=>s,toc:()=>a});var o=i(4848),t=i(8453);const r={},c="Source API\u4ecb\u7ecd",s={id:"application-development/api/stream/source",title:"Source API\u4ecb\u7ecd",description:"GeaFlow\u5bf9\u5916\u63d0\u4f9b\u4e86Source API\uff0c\u5728\u63a5\u53e3\u5c42\u9762\u9700\u8981\u63d0\u4f9bIWindow\uff0c\u7528\u4e8e\u6784\u5efa\u76f8\u5e94\u7684window source\uff0c\u7528\u6237\u53ef\u4ee5\u901a\u8fc7\u5b9e\u73b0SourceFunction\u6765\u5b9a\u4e49\u5177\u4f53\u7684\u6e90\u5934\u8bfb\u53d6\u903b\u8f91\u3002",source:"@site/../docs-cn/source/5.application-development/1.api/2.stream/1.source.md",sourceDirName:"5.application-development/1.api/2.stream",slug:"/application-development/api/stream/source",permalink:"/tugraph-analytics/zh/application-development/api/stream/source",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"\u7b80\u4ecb",permalink:"/tugraph-analytics/zh/application-development/api/overview"},next:{title:"Process API\u4ecb\u7ecd",permalink:"/tugraph-analytics/zh/application-development/api/stream/process"}},l={},a=[{value:"\u63a5\u53e3",id:"\u63a5\u53e3",level:2},{value:"\u793a\u4f8b",id:"\u793a\u4f8b",level:2}];function d(e){const n={br:"br",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",t:"t",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,t.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"source-api\u4ecb\u7ecd",children:"Source API\u4ecb\u7ecd"})}),"\n",(0,o.jsx)(n.p,{children:"GeaFlow\u5bf9\u5916\u63d0\u4f9b\u4e86Source API\uff0c\u5728\u63a5\u53e3\u5c42\u9762\u9700\u8981\u63d0\u4f9bIWindow\uff0c\u7528\u4e8e\u6784\u5efa\u76f8\u5e94\u7684window source\uff0c\u7528\u6237\u53ef\u4ee5\u901a\u8fc7\u5b9e\u73b0SourceFunction\u6765\u5b9a\u4e49\u5177\u4f53\u7684\u6e90\u5934\u8bfb\u53d6\u903b\u8f91\u3002"}),"\n",(0,o.jsx)(n.h2,{id:"\u63a5\u53e3",children:"\u63a5\u53e3"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,o.jsxs)(n.table,{children:[(0,o.jsx)(n.thead,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.th,{children:"API"}),(0,o.jsx)(n.th,{children:"\u63a5\u53e3\u8bf4\u660e"}),(0,o.jsx)(n.th,{children:"\u5165\u53c2\u8bf4\u660e"})]})}),(0,o.jsx)(n.tbody,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsxs)(n.td,{children:["PWindowSource",(0,o.jsxs)(n.t,{children:[" build(IPipelineContext pipelineContext, SourceFunction",(0,o.jsxs)(n.t,{children:[" sourceFunction, IWindow",(0,o.jsx)(n.t,{children:" window)"})]})]})]}),(0,o.jsx)(n.td,{children:"\u6784\u5efawindow source"}),(0,o.jsxs)(n.td,{children:["SourceFunction\uff1a\u5b9a\u4e49source\u8bfb\u53d6\u903b\u8f91\uff0cGeaFlow\u5185\u90e8\u5df2\u7ecf\u5b9e\u73b0\u4e86\u51e0\u79cd\u7c7b\u578b\u7684source function\uff0c\u4f8b\u5982Collection\u3001File\u7b49\uff1b",(0,o.jsx)(n.br,{}),"IWindow\uff1a\u5f53\u524d\u652f\u6301SizeTumblingWindow\u548cAllWindow\u4e24\u79cd\u7c7b\u578b\uff0c\u524d\u8005\u53ef\u4ee5\u7528\u4e8e\u652f\u6301\u6d41\u5f0f\u7684\u8bfb\u53d6\u7a97\u53e3\uff0c\u540e\u8005\u662f\u7528\u4e8e\u652f\u6301\u6279\u91cf\u4e00\u6b21\u6027\u8bfb\u53d6\u5b8c\u3002"]})]})})]}),"\n",(0,o.jsx)(n.p,{children:"\u4e3a\u4e86\u6784\u5efawindow source\uff0c\u7528\u6237\u4e00\u822c\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7IPipelineTaskContext\u63d0\u4f9b\u7684buildSource\u63a5\u53e3\u6765\u5b9e\u73b0\u3002"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'\t// Interface.\n\t<T> PWindowSource<T> buildSource(SourceFunction<T> sourceFunction, IWindow<T> window);\n\n\t// Example: \u6784\u5efawindow size\u4e3a2\u7684collection source.\n\tList<String> words = Lists.newArrayList("hello", "world", "hello", "word");\n\tPWindowSource<String> source =\n        pipelineTaskCxt.buildSource(new CollectionSource<String>(words) {},\n            SizeTumblingWindow.of(2));\n'})}),"\n",(0,o.jsx)(n.h2,{id:"\u793a\u4f8b",children:"\u793a\u4f8b"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'public class WindowStreamWordCount {\n\n    private static final Logger LOGGER =\n        LoggerFactory.getLogger(WindowStreamWordCount.class);\n\n    public static void main(String[] args) {\n        Environment environment = EnvironmentFactory.onLocalEnvironment();\n        Pipeline pipeline = PipelineFactory.buildPipeline(environment);\n        pipeline.submit(new PipelineTask() {\n            @Override\n            public void execute(IPipelineTaskContext pipelineTaskCxt) {\n                Configuration config = pipelineTaskCxt.getConfig();\n                List<String> words = Lists.newArrayList("hello", "world", "hello", "word");\n                // \u901a\u8fc7\u5185\u7f6e\u7684CollectionSource\u6784\u5efasource\uff0c\u540c\u65f6\u6307\u5b9awindow\u7c7b\u578b\u4e3aSizeTumblingWindow\uff0cwindow size\u4e3a2\u3002\n                PWindowSource<String> source =\n                    pipelineTaskCxt.buildSource(new CollectionSource<String>(words) {},\n                        SizeTumblingWindow.of(2));\n                source.sink(v -> LOGGER.info("result: {}", v));\n            }\n        });\n\n        IPipelineResult result = pipeline.execute();\n        // \u7b49\u5f85\u6267\u884c\u5b8c\u6210\n        result.get();\n    }\n\n}\n'})})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>c,x:()=>s});var o=i(6540);const t={},r=o.createContext(t);function c(e){const n=o.useContext(r);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:c(e.components),o.createElement(r.Provider,{value:n},e.children)}}}]);